<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threads Clone</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        (function() {
            let raw = localStorage.getItem('threads_theme');
            let savedTheme = 'auto';
            if (raw) savedTheme = JSON.parse(raw);
            if (savedTheme == 'light') {
                document.documentElement.setAttribute('data-theme', 'light');
            } else if (savedTheme == 'dark') {
                document.documentElement.removeAttribute('data-theme');
            } else {
                if (!window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.setAttribute('data-theme', 'light');
                }
            }
        })();
    </script>
</head>
<body>
    <div class="app">
        <!-- Left Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-top">
                <a href="#" class="logo-link">
                    <img src="icons/logo.svg" width="30" height="34" alt="Threads" class="logo">
                </a>
            </div>

            <div class="sidebar-menu">
                <button class="nav-btn active" data-tab="home" title="Home">
                    <img src="icons/home.svg" width="26" height="26" alt="Home">
                </button>
                <button class="nav-btn" data-tab="search" title="Search">
                    <img src="icons/search.svg" width="26" height="26" alt="Search">
                </button>
                <button class="nav-btn" data-tab="create" title="Create">
                    <img src="icons/create.svg" width="26" height="26" alt="Create">
                </button>
                <button class="nav-btn" data-tab="activity" title="Activity">
                    <img src="icons/heart.svg" width="26" height="26" alt="Activity">
                </button>
                <button class="nav-btn" data-tab="profile" title="Profile">
                    <img src="icons/profile.svg" width="26" height="26" alt="Profile">
                </button>
            </div>

            <div class="sidebar-bottom">
                <button class="nav-btn" id="pinBtn" title="Pin">
                    <img src="icons/pin.svg" width="26" height="26" alt="Pin">
                </button>
                <div class="menu-wrapper">
                    <button class="nav-btn" id="menuBtn" title="Menu">
                        <img src="icons/menu.svg" width="24" height="24" alt="Menu">
                    </button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <!-- Main Menu -->
                        <div class="menu-main" id="menuMain">
                            <button class="dropdown-item" id="appearanceBtn">
                                <span>Appearance</span>
                                <img src="icons/arrow-right.svg" width="16" height="16" alt="arrow">
                            </button>
                            <button class="dropdown-item" id="reportBtn">
                                <span>Report a problem</span>
                            </button>
                        </div>
                        <!-- Appearance Submenu -->
                        <div class="menu-appearance" id="menuAppearance" style="display: none;">
                            <div class="submenu-header">
                                <button class="back-btn" id="backBtn">
                                    <img src="icons/arrow-left.svg" width="20" height="20" alt="back">
                                </button>
                                <span>Appearance</span>
                            </div>
                            <div class="theme-toggle">
                                <button class="theme-btn" data-theme="light" title="Light">
                                    <span><img src="icons/sun.svg" width="20" height="20" alt="light"></span>
                                </button>
                                <button class="theme-btn" data-theme="dark" title="Dark">
                                    <span><img src="icons/moon.svg" width="20" height="20" alt="dark"></span>
                                </button>
                                <button class="theme-btn active" data-theme="auto" title="Auto">
                                    <span>Auto</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- Header -->
                <header class="header">
                    <h1 id="headerTitle">Home</h1>
                    <div class="feed-selector" id="feedSelector" style="display: none;">
                        <button class="feed-selector-btn" id="feedSelectorBtn">
                            <span>For you</span>
                            <img src="icons/arrow-right.svg" width="16" height="16" alt="arrow" style="transform: rotate(90deg);">
                        </button>
                    </div>
                    <button class="login-btn-tablet" id="tabletLoginBtn">Log in</button>
                </header>

                <!-- Composer (shown when logged in) -->
                <div class="composer" id="composer" style="display: none;">
                    <img src="" alt="avatar" class="composer-avatar" id="composerAvatar">
                    <input type="text" class="composer-input" id="composerInput" placeholder="What's new?">
                    <button class="composer-post-btn" id="composerPostBtn">Post</button>
                </div>

                <!-- Feed -->
                <div class="feed" id="feed">
                </div>

                <!-- Search View -->
                <div class="search-view" id="searchView" style="display: none;">
                    <div class="search-container">
                        <div class="search-box-wrapper">
                            <div class="search-box">
                                <img src="icons/search.svg" width="20" height="20" alt="Search" class="search-icon">
                                <div class="filter-tags" id="filterTags"></div>
                                <input type="text" placeholder="Search" class="search-input" id="searchInput">
                            </div>
                            <div class="filter-wrapper">
                                <button class="filter-btn" id="filterBtn">
                                    <img src="icons/filter.svg" width="16" height="16" alt="Filter" class="filter-icon">
                                </button>
                                <div class="filter-dropdown" id="filterDropdown">
                                    <button class="filter-item" data-filter="after">
                                        <span>After date</span>
                                        <img src="icons/clock-after.svg" width="20" height="20" alt="After date">
                                    </button>
                                    <button class="filter-item" data-filter="before">
                                        <span>Before date</span>
                                        <img src="icons/clock-before.svg" width="20" height="20" alt="Before date">
                                    </button>
                                    <div class="filter-divider"></div>
                                    <button class="filter-item" data-filter="profile">
                                        <span>From profile...</span>
                                        <img src="icons/profile-search.svg" width="20" height="20" alt="From profile">
                                    </button>
                                </div>
                            </div>
                        </div>
                        <input type="date" id="datePicker" class="date-picker-hidden">
                        <div class="calendar-picker" id="calendarPicker">
                            <div class="calendar-header">
                                <span class="calendar-month-year" id="calendarMonthYear"></span>
                                <div class="calendar-nav">
                                    <button class="calendar-nav-btn" id="calendarPrev">
                                        <img src="icons/arrow-left.svg" width="16" height="16" alt="Previous">
                                    </button>
                                    <button class="calendar-nav-btn" id="calendarNext">
                                        <img src="icons/arrow-right.svg" width="16" height="16" alt="Next">
                                    </button>
                                </div>
                            </div>
                            <div class="calendar-days-header">
                                <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                            </div>
                            <div class="calendar-grid" id="calendarGrid"></div>
                        </div>
                    </div>
                    <div class="search-results" id="searchResults">
                    </div>
                </div>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <!-- Login Box -->
            <div class="login-box" id="loginBox">
                <h2>Log in or sign up for Threads</h2>
                <p>See what people are talking about and join the conversation.</p>
                <button class="instagram-btn-sidebar" id="showLoginBtn">
                    <img src="icons/instagram-white.svg" width="24" height="24" alt="instagram">
                    <span>Continue with Instagram</span>
                </button>
                <a href="login.html" class="username-login-link" id="showUsernameLoginBtn">Log in with username instead</a>
            </div>
            <div class="login-box-footer">
                <span>&copy; 2026</span>
                <a href="#">Threads Terms</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Cookies Policy</a>
                <a href="#">Report a problem</a>
            </div>

            <!-- User Profile Box (shown when logged in) -->
            <div class="user-box" id="userBox" style="display: none;">
                <img src="" alt="avatar" class="user-box-avatar" id="userBoxAvatar">
                <h2 id="userBoxName"></h2>
                <p id="userBoxUsername"></p>
                <button class="logout-btn" id="logoutBtn">Log out</button>
            </div>

        </aside>

        <!-- Login Modal -->
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal">
                <!-- Action Prompt -->
                <div class="modal-content" id="actionPrompt">
                    <div class="gradient-heart">
                        <img src="icons/heart-gradient.svg" width="48" height="48" alt="heart">
                    </div>
                    <h2>Like this? You'll love Threads.</h2>
                    <p class="prompt-subtitle">Sign up to like, reply and more.</p>
                    <button class="instagram-btn" id="continueInstagram">
                        <img src="icons/instagram-color.svg" width="44" height="44" alt="instagram" class="instagram-icon-gradient">
                        <span>Continue with Instagram</span>
                        <img src="icons/arrow-right.svg" width="20" height="20" alt="arrow" class="arrow-icon">
                    </button>
                </div>

                <!-- Comment Prompt -->
                <div class="modal-content" id="commentPrompt" style="display: none;">
                    <div class="gradient-heart">
                        <img src="icons/comment-gradient.svg" width="48" height="48" alt="comment">
                    </div>
                    <h2>Sign up to chime in</h2>
                    <p class="prompt-subtitle">You're one step away from joining the conversation.</p>
                    <button class="instagram-btn" id="continueInstagramComment">
                        <img src="icons/instagram-color.svg" width="44" height="44" alt="instagram" class="instagram-icon-gradient">
                        <span>Continue with Instagram</span>
                        <img src="icons/arrow-right.svg" width="20" height="20" alt="arrow" class="arrow-icon">
                    </button>
                </div>

                <!-- Repost Prompt -->
                <div class="modal-content" id="repostPrompt" style="display: none;">
                    <div class="gradient-heart">
                        <img src="icons/repost-gradient.svg" width="48" height="48" alt="repost">
                    </div>
                    <h2>Sign up to spread the word</h2>
                    <p class="prompt-subtitle">You're one step closer to sparking conversations.</p>
                    <button class="instagram-btn" id="continueInstagramRepost">
                        <img src="icons/instagram-color.svg" width="44" height="44" alt="instagram" class="instagram-icon-gradient">
                        <span>Continue with Instagram</span>
                        <img src="icons/arrow-right.svg" width="20" height="20" alt="arrow" class="arrow-icon">
                    </button>
                </div>

                <!-- Share Prompt -->
                <div class="modal-content" id="sharePrompt" style="display: none;">
                    <h2>Say more with Threads</h2>
                    <p class="prompt-subtitle">Join Threads to share thoughts, find out what's going on, follow your people and more.</p>
                    <button class="instagram-btn" id="continueInstagramShare">
                        <img src="icons/instagram-color.svg" width="44" height="44" alt="instagram" class="instagram-icon-gradient">
                        <span>Continue with Instagram</span>
                        <img src="icons/arrow-right.svg" width="20" height="20" alt="arrow" class="arrow-icon">
                    </button>
                </div>

                <!-- Post Prompt -->
                <div class="modal-content" id="postPrompt" style="display: none;">
                    <div class="gradient-heart">
                        <img src="icons/create-gradient.svg" width="48" height="48" alt="create">
                    </div>
                    <h2>Sign up to post</h2>
                    <p class="prompt-subtitle">Join Threads to share ideas, ask questions, post random thoughts and more.</p>
                    <button class="instagram-btn" id="continueInstagramPost">
                        <img src="icons/instagram-color.svg" width="44" height="44" alt="instagram" class="instagram-icon-gradient">
                        <span>Continue with Instagram</span>
                        <img src="icons/arrow-right.svg" width="20" height="20" alt="arrow" class="arrow-icon">
                    </button>
                </div>

                <!-- Login Form -->
                <div class="modal-content" id="loginForm" style="display: none;">
                    <h2>Log in</h2>
                    <div class="form-group">
                        <input type="text" id="loginUsername" placeholder="Username" class="form-input">
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginPassword" placeholder="Password" class="form-input">
                    </div>
                    <button class="form-btn" id="loginSubmit">Log in</button>
                </div>

                <!-- Create Post Form -->
                <div class="modal-content create-post-modal" id="createPostForm" style="display: none;">
                    <div class="create-post-header">
                        <button class="create-post-close" id="createPostClose">&times;</button>
                        <h2>New thread</h2>
                        <button class="create-post-submit" id="createPostSubmit">Post</button>
                    </div>
                    <div class="create-post-body">
                        <div class="create-post-user">
                            <img src="" alt="avatar" class="create-post-avatar" id="createPostAvatar">
                            <div class="create-post-line"></div>
                        </div>
                        <div class="create-post-content">
                            <span class="create-post-username" id="createPostUsername"></span>
                            <textarea class="create-post-textarea" id="createPostText" placeholder="Start a thread..." maxlength="2200"></textarea>
                            <div class="create-post-image-preview" id="createPostImagePreview" style="display: none;">
                                <img src="" alt="preview" id="createPostPreviewImg">
                                <button class="remove-image-btn" id="removeImageBtn">&times;</button>
                            </div>
                            <div class="create-post-actions">
                                <label class="add-image-btn" id="addImageBtn">
                                    <img src="icons/image.svg" width="20" height="20" alt="Add image">
                                    <input type="file" accept="image/*" id="createPostImage" style="display: none;">
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <button class="fab" id="fab" style="display: none;">
            <img src="icons/create.svg" width="24" height="24" alt="Create">
        </button>

        <!-- Toast Notification -->
        <div class="toast" id="toast">
            <span class="toast-message" id="toastMessage"></span>
        </div>

        <!-- Report Problem Modal -->
        <div class="report-modal-overlay" id="reportModalOverlay">
            <button class="report-modal-close" id="reportModalClose">
                <img src="icons/close-circle.svg" width="18" height="18" alt="Close">
            </button>
            <div class="report-modal">
                <h2 class="report-modal-title">Report a problem</h2>
                <div class="report-modal-content">
                    <textarea class="report-textarea" id="reportTextarea" placeholder="Please include as many details as possible..."></textarea>
                    <div class="report-modal-footer">
                        <input type="file" id="reportFileInput" class="report-file-input" accept="image/*" multiple>
                        <button class="report-attach-btn" id="reportAttachBtn">
                            <img src="icons/image.svg" width="20" height="20" alt="Attach">
                        </button>
                        <button class="report-submit-btn" id="reportSubmitBtn">
                            <span class="report-submit-text">Submit</span>
                            <span class="report-submit-spinner"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="security.js"></script>
    <script src="app.js"></script>
</body>
</html>
